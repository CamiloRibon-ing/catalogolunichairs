<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Admin Panel - Luni Chairs</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <h1>Test Panel Admin</h1>
    <div style="margin: 20px 0;">
        <button onclick="testAdminButton()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px;">
            ğŸ”§ Mostrar BotÃ³n Admin
        </button>
        <button onclick="testAdminPanel()" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 5px; margin-left: 10px;">
            ğŸš€ Abrir Panel Admin
        </button>
        <button onclick="checkAdminButton()" style="padding: 10px 20px; background: #ffc107; color: black; border: none; border-radius: 5px; margin-left: 10px;">
            ğŸ” Verificar BotÃ³n
        </button>
    </div>
    <div id="status" style="margin: 20px 0; padding: 10px; background: #f8f9fa; border-radius: 5px;"></div>

    <!-- Incluir el modal admin completo -->
    <div class="modal" id="admin-modal">
        <div class="modal-content admin-modal-content">
            <button class="modal-close-btn" id="admin-close">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="admin-header">
                <h2><i class="fas fa-crown"></i> Panel de AdministraciÃ³n</h2>
                <p>Gestiona tu tienda desde aquÃ­</p>
            </div>
            
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="dashboard" onclick="showAdminTab('dashboard')">
                    <i class="fas fa-chart-line"></i> Dashboard
                </button>
                <button class="admin-tab" data-tab="orders" onclick="showAdminTab('orders')">
                    <i class="fas fa-shopping-bag"></i> Ventas
                </button>
            </div>

            <!-- TAB DASHBOARD -->
            <div id="admin-dashboard-tab" class="admin-tab-content active">
                <h3><i class="fas fa-chart-line"></i> Dashboard de EstadÃ­sticas</h3>
                <p>Dashboard bÃ¡sico para test</p>
            </div>

            <!-- TAB VENTAS -->
            <div id="admin-orders-tab" class="admin-tab-content">
                <div class="tab-header">
                    <h3><i class="fas fa-shopping-bag"></i> GestiÃ³n de Ventas</h3>
                </div>
                <div id="admin-orders-list" class="admin-orders-list">
                    <p>Lista de Ã³rdenes aparecerÃ¡ aquÃ­</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts necesarios -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabaseClient.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/orders.js"></script>
    <script src="js/admin.js"></script>

    <script>
        function testAdminButton() {
            const status = document.getElementById('status');
            status.innerHTML = 'ğŸ”§ Intentando crear botÃ³n admin...';
            
            try {
                adminPanel.showAdminButton();
                status.innerHTML = 'âœ… BotÃ³n admin creado. Verifica la esquina inferior derecha.';
            } catch (error) {
                status.innerHTML = 'âŒ Error: ' + error.message;
            }
        }

        function testAdminPanel() {
            const status = document.getElementById('status');
            status.innerHTML = 'ğŸš€ Abriendo panel admin...';
            
            try {
                adminPanel.openAdminPanel();
                status.innerHTML = 'âœ… Panel admin abierto.';
            } catch (error) {
                status.innerHTML = 'âŒ Error: ' + error.message;
            }
        }

        function checkAdminButton() {
            const status = document.getElementById('status');
            const btn = document.getElementById('admin-btn');
            
            if (btn) {
                status.innerHTML = `âœ… BotÃ³n admin encontrado. PosiciÃ³n: ${btn.style.position || 'default'}, Z-index: ${btn.style.zIndex || 'default'}`;
            } else {
                status.innerHTML = 'âŒ BotÃ³n admin NO encontrado en el DOM';
            }
        }

        function showAdminTab(tab) {
            document.querySelectorAll('.admin-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.admin-tab-content').forEach(c => c.classList.remove('active'));
            
            document.querySelector(`.admin-tab[data-tab="${tab}"]`)?.classList.add('active');
            document.getElementById(`admin-${tab}-tab`)?.classList.add('active');
        }

        // Inicializar al cargar
        window.onload = () => {
            document.getElementById('status').innerHTML = 'ğŸ”„ PÃ¡gina cargada. Usa los botones para probar.';
            
            // Event listener para cerrar modal
            document.getElementById('admin-close').addEventListener('click', () => {
                document.getElementById('admin-modal').style.display = 'none';
            });
        };
    </script>
</body>
</html>